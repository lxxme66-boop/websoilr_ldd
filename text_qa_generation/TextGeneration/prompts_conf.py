system_prompt = """
你是一位显示半导体专家。现在我需要你的协助。

"""
user_prompts={
1: """
user_prompt = "我需要你协助处理文档,提取文档中的所有图片并进行分析 (通常带有 figure,fig 等下标)。\
根据文档内容,我需要你提取以下内容:\
1) 每个图片相关的知识（摘录总结和图片相关的所有知识,并翻译成中文);\
2) 每个图片的解释与介绍, 例如图片反映的知识和揭示的规律,可能代表的意义等；\
3) 图片的描述:文档中对图片所呈现的内容的描述；\
4) 图片介绍:图片本身没有,但文章提及的对图片理解有帮助的内容,例如到图片的来源,实验方法,实验环境等。\

所有的信息请整理出markdown 表格形式,从左到右依次为:\
图片在文中下标, 图片相关的知识点, 图片解释, 图片描述, 图片介绍。
每一行代表一个图片,我需要你对每个图片进行分析,整理,提取
如果某一部分内容缺失,可以用"无"来代替。\

返回信息需要通過圖片下標進行排序, 且利用代碼轉化爲markdown表格, 所以返回内容
有且僅有一個markdown表格, 且表格的內容需要用markdown語法進行格式化。\请根据图片内容,提取相关的知识点,解释,描述和介绍。
""",
2: """
我需要你对文档中每一个图片根据文档内容生成三个部分的内容:图片相关的知识点,图片解释,图片描述。\
所有的信息请整理出markdown 表格形式,从左到右依次为:\
图片在文中下标, 图片相关的知识点, 图片解释, 图片描述。
如果某一部分内容缺失,可以用"无"来代替。\
返回信息需要通過圖片下標進行排序, 且利用代碼轉化爲markdown表格, 所以返回内容
有且僅有一個markdown表格, 且表格的內容需要用markdown語法進行格式化。\
请根据图片内容,提取相关的知识点,解释,描述和介绍。
    """,
3: """
我需要你根據我給你的文檔,對給定的圖片进行分析解释
所有的信息請整理出markdown 表格形式,從左到右依次為:\
图片的下标, 图片相关的知识,图片的解释分析,图片内容的描述介绍。\

返回信息需要通過圖片下標進行排序, 且利用代碼轉化爲markdown表格, 所以返回内容
有且僅有一個markdown表格, 且表格的內容需要用markdown語法進行格式化。\
请根据图片内容,提取相关的知识点,解释,描述和介绍。
""",
4: 
"""
给定你图片和文档,我需要你对我给你的图片进行分析解释。
根据文档,和你自己的理解能力,我需要你整理出以下信息:
1)图片相关的知识点
2)对图片的分析解释
3)对图片的描述

我需要你讲回答整理出json格式
json的key分别为
"related_knowledge", "analysisResults","imageDescription"

返回内容只有json 


""",
5:
"""
根据我给你的markdown文本和图片,与文中的图片caption。文本以markdown格式给出。图片在文中以figure, fig等下标标注。你可以通过图片的路径: "{image_path}",来找到图片在markdown中的位置。\
我需要你从文本中提取出和图片相关的信息,并把它们分成三类:
1) 对图片内容的描述与介绍。\
2) 对图片的解释与分析,例如图片反映的知识和揭示的规律,可能代表的意义等,可以得出的推断,导致图片现象的原因等。不仅仅是结论,如果存在推理过程,需要把文本中
的推理过程也提取出来。\
3) 文本中能够支持图片解释与分析的相关内容,例如相关知识,实验方法,实验环境等,专有名词的定义等。
我要求你完整的提取和翻译能够支持文本对图片分析,推理和解释的相关内容。注意,不要把这些内容和图片的解释与分析混淆在一起。以及图片的介绍混在\
我希望你所有对图片的解释与分析的内容都是基于给定文本中对该图片的分析和介绍,而不是你自己的理解。不要遗漏和简化原文对该图片的分析和解释\
如果文本中并没有对图片进行描述或分析,你可以用"无"来代替。\
如果文本中并没有对图片内容理解,推理与分析相关的知识有明显相关的知识,你可以用"无"来代替。\
如果文本或者图片cpation对图片的描述和介绍不够清楚或者有所缺失,你可以描述图片的内容。\

例如,我给你一张台风形成时大气热力场的图片；
对图片的描述应该是该图片中的台风形成时大气热力场的分布情况；
对图片的分析应该是该图片中台风形成时大气热力场的分布情况与台风形成之间的关系台风可能影响的范围；
对和该图片相关的知识应该是台风形成的条件,热力学,大气热力场的定义等通用知识,地表自转偏向力的方向等。

注意,你可以根据图片的caption和图片路径锁定图片在文档的位置 !


所有的信息请整理出JSON格式, key分别为:
"imageDescription", "analysisResults","relatedKnowledge"\
返回内容只有以正确json格式组成的json 字符串

一下是markdown 文本内容:

{markdown_content}

""",
6: 
"""
根据我给你的markdown文本和图片。文本以markdown格式给出。图片在文中以figure, fig等下标标注。你可以通过图片的路径: "{image_path}",来找到图片在markdown中的位置。\
我需要你从文本中提取出和图片相关的信息,并把它们分成三类:
1) 对图片内容的描述与介绍,实验方法,实验环境等,专有名词的定义等
2) 对图片的解释与分析,例如图片反映的知识和揭示的规律,可能代表的意义等,可以得出的推断,导致图片现象的原因等。不仅仅是结论,也要将推理过程完整的提取出来。\
3) 文本和图片解释与分析相关相关知识,例如专有名词的定义等,公式,公理,定理等的定义和解释。\

我要求你完整的提取和翻译能够支持文本对图片分析,推理和解释的相关内容。注意,不要把这些内容和图片的解释与分析混淆在一起。以及图片的介绍混在\

我希望你所有对图片的解释与分析的内容都是基于给定文本中对该图片的分析和介绍,而不是你自己的理解。不要遗漏和简化原文对该图片的分析和解释\
如果文本中并没有对图片进行描述或分析,你可以用"无"来代替。\
如果文本中并没有对图片内容理解,推理与分析相关的知识有明显相关的知识,你可以用"无"来代替。\
如果文本对图片的描述和介绍不够清楚或者有所缺失,你可以描述图片的内容。但不可以胡编乱造。\

所有提取的信息阅读时需要通顺,完整,清晰。且独立于原文,使读者在阅读时不需要去对照原文。尤其是对图片的描述和分析。不可以用文章引用的方式来进行省略,尤其是出现自定义名词,公式,符号等需要解释的地方,context中需要给出原文定义。
不可以出现对文本的引用和对照的描述:例如"根据文本中的描述"或者"根据图片的描述"或者"根据图片的分析"等等。需要将文中的描述和分析进行完整的提取和翻译。\

例如,我给你一张台风形成时大气热力场的图片；
对图片的描述应该是该图片中的台风形成时大气热力场的分布情况；
对图片的分析应该是该图片中台风形成时大气热力场的分布情况与台风形成之间的关系台风可能影响的范围；
对和该图片相关的知识应该是台风形成的条件,热力学,大气热力场的定义等通用知识,地表自转偏向力的方向等。

注意,你可以根据图片在文档的位置 来提升图片的描述和分析的准确性和完整性!\


所有的信息请整理出JSON格式, key分别为:
"imageDescription", "analysisResults","relatedKnowledge"\
返回内容只有以正确json格式组成的json 字符串

一下是markdown 文本内容:

{markdown_content}

""",
7:
"""
根据我给你的markdown文本和图片,与文中的图片caption。文本以markdown格式给出。图片在文中以figure, fig等下标标注。你可以通过图片的路径: "{image_path}",来找到图片在markdown中的位置。\
我需要你依据我所给你的markdown文本和图片,对图片进行分析解释,并给出详细的推理过程。
根据文档,和你自己的理解能力,我需要你对每张图片整理出以下信息:
1)图片的描述与介绍,包括图片的内容,图片的来源,实验方法,实验环境等,图片上各个元素代表的意义等。\
2)对图片的分析解释,例如图片反映的知识和揭示的规律,可能代表的意义等,可以得出的推断,导致图片现象的原因等。我需要你根据markdown文本
对图片给出详细的分析和解释。并给出结论的详细推理过程。每一步推理都需要列出依据。\
3)和图片分析解释相关的知识。可以依据markdown文本,图片的caption,和你自己的理解能力,给出相关的知识。并给出相关知识的详细解释。\

例如,我给你一张台风形成时大气热力场的图片；
对图片的描述应该是该图片中的台风形成时大气热力场的分布情况；
对图片的分析应该是该图片中台风形成时大气热力场的分布情况与台风形成之间的关系台风可能影响的范围；
对和该图片相关的知识应该是台风形成的条件,热力学,大气热力场的定义等通用知识,地表自转偏向力的方向等。

注意,你可以根据图片的caption和图片路径锁定图片在文档的位置 !
所有的信息请整理出JSON格式, key分别为:
"imageDescription", "analysisResults","relatedKnowledge"\
返回内容只有以正确json格式组成的json 字符串

以下是markdown文本内容:

{markdown_content}

""",
8:
'''
以下是我给你的markdown文本和图片,与文中的图片caption。文本以markdown格式给出。图片在文中以figure, fig等下标标注。你可以通过图片的路径: "{image_path}",来找到图片在markdown中的位置。\
此外是你之前根据markdown文本和图片生成的json内容。\
内容有三个部分:
1) 对图片内容的描述与介绍: {imageDescription}
2) 对图片的解释与分析,以及推理过程: {analysisResults}
3) 文本中能够支持图片解释与分析的相关内容,例如相关知识,实验方法,实验环境等,专有名词的定义等: {relatedKnowledge}

我需要你根据这些内容生成一个和该图片有关的问题,并给出正确的答案,和答案的详细推理过程。\
问题必须是选择题,答案是单选题。\

例如,我给你一张台风形成时大气热力场的图片；
对图片的描述应该是该图片中的台风形成时大气热力场的分布情况；
对图片的分析应该是该图片中台风形成时大气热力场的分布情况与台风形成之间的关系台风可能影响的范围；
对和该图片相关的知识应该是台风形成的条件,热力学,大气热力场的定义等通用知识,地表自转偏向力的方向等。
问题可以是:这张图片拍摄于哪个半球？
A: 北半球
B: 南半球
C: 赤道

推理过程:\
1)根据图片的描述,该图片是台风形成时大气热力场的分布情况。
2)在北半球,台风的旋转方向是顺时针的,而在南半球,台风的旋转方向是逆时针的。
3)热力场的方向和台风的旋转方向是相同的。
4)根据图片的分析,该图片中台风形成时大气热力场的分布情况与台风形成之间的关系,台风是顺时针旋转的。
5)所以可以得出结论,该图片拍摄于北半球。

问题以json的格式返回,key为question, answer, reasoning,lecture,context
lecture 为解答该问题所需要的知识点
context 为该问题的背景介绍,例如图片符号的定义,图片的来源,实验方法,实验环境等。\

注意,你可以根据图片的caption和图片路径锁定图片在文档的位置 !
以下是markdown文本内容:

''',
9: """
以下是我给你的markdown文本和图片。文本以markdown格式给出。图片在文中的位置以 <image> 表示,无关图片以 <irrelevant> 表示

markdown文本内容:

{markdown_content}




首先你需要在markdown文本中获得三个方面的信息。
1) 对图片背景的介绍:主要是对图例的解释和图片相关背景的介绍,例如图片上各个元素代表的意义和图片获取的环境,方法,拍摄的对象等 \
2) 提取并整理markdown 文本对图片反映现象的描述与相关的分析解释,反映的规律和可能的原因,或者能够支持结论等。\
3) 和图片相关的知识。并给出相关知识的详细解释与介绍。\



接着,我需要你根据这些内容生成一个和该图片有关的问题,并给出正确的答案,和答案的详细推理过程。\
此数据会被用于构造QA数据集来训练多模态模型。\
问题必须是选择题,答案是单选题。\

问题以json的格式返回,key为question, answer, choices, reasoning,lecture,context
lecture 为解答该问题所需要的知识点
context 为回答该问题所必需的背景介绍,例如图片符号的定义,图片的来源,实验方法,实验环境等。

所以对context的描述需要全面明了,不可过分简介,否则会影响用户的理解和判断；但不能包含问题的答案和推理过程,且不可直接包含图片的描述和分析。\
context的描述需要准确,完整,清晰。且要避免使用模糊的描述和解释,未经解释的专有名词,公式,符号等。
注意!!!用户回答问题时只能看到图片和问题选项,也无法看到markdown文本内容和图片的描述与分析。
所以context的描述需要全面明了,且独立于原文,使读者在阅读时不需要去对照或检索原文。\

尽量给出详细的问题解答推理过程,不要过于简化。可以利用文本中的内容来生成问题答案和推理过程,但不能直接引用文本中的内容。
例如:"如文中所说......" 或者"根据文本中的描述......"等。所有的内容都需要用中文进行描述和解释,推理过程,依据的描述需要准确,完整,清晰。且要避免使用模糊的描述和解释,未经解释的专有名词,公式,符号等。\
推理过程需要完整,清晰,准确。能正确的推导出问题的答案。而且推理内容需要独立于文本,使读者在阅读时不需要去对照或检索文本,

例如,我给你一张台风形成时大气热力场的图片；
对图片的描述应该是该图片中的台风形成时大气热力场的分布情况；
对图片的分析应该是该图片中台风形成时大气热力场的分布情况与台风形成之间的关系台风可能影响的范围；
对和该图片相关的知识应该是台风形成的条件,热力学,大气热力场的定义等通用知识,地表自转偏向力的方向等。
问题可以是:这张图片拍摄于哪个半球？
A: 北半球
B: 南半球
C: 赤道

推理过程:\
1)根据图片的描述,该图片是台风形成时大气热力场的分布情况。
2)在北半球,台风的旋转方向是顺时针的,而在南半球,台风的旋转方向是逆时针的。
3)热力场的方向和台风的旋转方向是相同的。
4)根据图片的分析,该图片中台风形成时大气热力场的分布情况与台风形成之间的关系,台风是顺时针旋转的。
5)所以可以得出结论,该图片拍摄于北半球。



""",
9.1:
"""
以下是我给你的markdown文本和图片。文本以markdown格式给出。图片在文中的位置以 <image> 表示,无关图片以 <irrelevant> 表示

markdown文本内容:

{markdown_content}

我需要你根据这些内容生成一个和该图片有关的问题,并给出正确的答案,和答案的详细推理过程。\
此数据会被用于构造QA数据集来训练多模态模型。\
问题必须是选择题,答案是单选题且问题需要有一定的难度。\

你设计的问题要以json的格式返回,key为question, answer, choices, reasoning,lecture,context
question,answer, choices 为问题,答案和选项
choices为一个一维列表,包含至少三个选项,且选项需要有一定的干扰性。

lecture 为解答该问题所需要的知识点。

context 为回答该问题所必需的图例解释,例如图片各个元素的定义,图片的来源,实验方法,实验环境等。

reasoning 为解答问题的推理过程,推理过程需要详细列出每一步的依据。并且推理过程需要完整,清晰,准确。能正确的推导出问题的答案。\
注意所有的内容都需要用中文进行描述和解释,推理过程,依据的描述需要准确,完整,清晰。且要避免使用模糊的描述和解释,未经解释的专有名词,公式,符号等。\
推理过程需要完整,清晰,准确。逻辑严密且能正确的推导出问题的答案。推理中所有知识和依据需要独立于原文,使读者在阅读时不需要去对照原文,
也不可以出现对文本的引用和对照的描述:例如"根据文本中的描述"或者"根据图片的描述"或者"根据图片的分析"等等。
推理时,先要对图片进行描述和分析,然后再进行推理得出答案。\


""",
9.1:  """
以下是我给你的markdown文本和图片。文本以markdown格式给出。图片在文中的位置以 <image> 表示,无关图片以 <irrelevant> 表示

markdown文本内容:

{markdown_content}


首先你需要在markdown文本中获得三个方面的信息。
1) 对图片背景的介绍:主要是对图例的解释和图片相关背景的介绍,例如图片上各个元素代表的意义和图片获取的环境,方法,拍摄的对象等 \
2) 提取并整理markdown 文本对图片反映现象的描述与相关的分析解释,反映的规律和可能的原因,或者能够支持结论等。\
3) 和图片相关的知识。并给出相关知识的详细解释与介绍。\

接着,
我需要你根据这些内容生成一个和该图片有关的问题,并给出正确的答案,和答案的详细推理过程。\
此数据会被用于构造QA数据集来训练多模态模型。\
问题必须是选择题,答案是单选题且问题需要有一定的难度。\

你设计的问题要以json的格式返回,key为question, answer, choices, reasoning,lecture,context
question,answer, choices 为问题,答案和选项
choices为一个一维列表,包含至少三个选项,且选项需要有一定的干扰性。

lecture 为解答该问题所需要的知识点。

context 为回答该问题所必需的图例解释,例如图片各个元素的定义,图片的来源,实验方法,实验环境等。
对context的描述需要全面明了,不可过分简介,且要避免使用模糊的描述和解释,未经解释的专有名词,公式,符号等；否则会影响用户的理解和判断；但不能包含问题的答案和推理过程,且不可直接包含图片的描述和分析。\
注意!!!用户回答问题时只能看到图片,问题和context,无法看到markdown文本。
对context的描述需要独立于原文,使读者在阅读时不需要去对照或检索原文。因此不得使用 '文中','文本中'等描述。\
再次注意,用户回答问题时只能看到图片和context,所以对context的描述需要全面明了,但不能包含问题的答案和推理过程,
且不可直接包含图片的描述和分析。问题的答案和推理过程所有的依据都只能从context中获得,不能引用markdown文本中的内容。例如
"文本中提到的"或者"根据文本中的描述"等。\

reasoning 为解答问题的推理过程,推理过程需要详细列出每一步的依据。并且推理过程需要完整,清晰,准确。能正确的推导出问题的答案。\
注意所有的内容都需要用中文进行描述和解释,推理过程,依据的描述需要准确,完整,清晰。且要避免使用模糊的描述和解释,未经解释的专有名词,公式,符号等。\
推理过程需要完整,清晰,准确。逻辑严密且能正确的推导出问题的答案。推理中所有知识和依据需要独立于原文,使读者在阅读时不需要去对照原文,
也不可以出现对文本的引用和对照的描述:例如"根据文本中的描述"或者"根据图片的描述"或者"根据图片的分析"等等。
推理时,先要对图片进行描述和分析,然后再进行推理得出答案。\


例如,我给你一张台风形成时大气热力场的图片；
对图片的描述应该是该图片中的台风形成时大气热力场的分布情况；
对图片的分析应该是该图片中台风形成时大气热力场的分布情况与台风形成之间的关系台风可能影响的范围；
对和该图片相关的知识应该是台风形成的条件,热力学,大气热力场的定义等通用知识,地表自转偏向力的方向等。
问题可以是:这张图片拍摄于哪个半球？
A: 北半球
B: 南半球
C: 赤道

推理过程:\
1)根据图片的描述,该图片是台风形成时大气热力场的分布情况。
2)在北半球,台风的旋转方向是顺时针的,而在南半球,台风的旋转方向是逆时针的。
3)热力场的方向和台风的旋转方向是相同的。
4)根据图片的分析,该图片中台风形成时大气热力场的分布情况与台风形成之间的关系,台风是顺时针旋转的。
5)所以可以得出结论,该图片拍摄于北半球。

""",
9.2: 
"""
以下是我根据markdown 文本和图片生成的json内容。\
内容有三个部分:
1) 图图片相关的知识点: {lecture}
2) 图片相关的背景: {context}
3) 图片相关的问题: {question}
4) 问题的选项: {choices}
5) 问题的答案: {answer}
6) 问题的推理过程: {reasoning}

我需要你根据文本,和图片,对以上内容进行修改和润色。使得他们作为多模态模型训练数据时,内容更通顺,清晰,准确。\
以下是各个部分的修改要求:
a)问题相关的知识点: 对于问题相关知识的表述你可以在保留原意的进行修改和润色。对于一些不必要的内容可以进行删除和简化。要求内容通顺,清晰,准确。\
b)问题背景: 对于问题背景的表述你可以在保留原意的进行修改和润色。对于一些不必要的内容可以进行删除和简化。要求内容通顺,清晰,准确。
训练时不会给用户展示markdown文本,所以context的描述需要全面明了,但不能包含问题的答案和推理过程,且不可直接包含图片的描述和分析。\
c)问题: 对于问题的表述你可以在保留原意的进行修改和润色。对于一些不必要的内容可以进行删除和简化。要求内容通顺,清晰,准确。\
d)选项: 对于问题的选项你可以在保留原意的进行修改和润色。对于一些不必要的内容可以进行删除和简化。要求内容通顺,清晰,准确。\
e)答案: 对于问题的答案你可以在保留原意的进行修改和润色。对于一些不必要的内容可以进行删除和简化。要求内容通顺,清晰,准确。\

f)推理过程: 对于问题的推理过程你可以在保留原意的进行修改和润色。对于一些不必要的内容可以进行删除和简化。要求内容通顺,清晰,准确。
根据markdown文本和图片的内容,推理过程需要完整,清晰,准确。能正确的推导出问题的答案。推理过程需要独立于原文,使读者在阅读时不需要去对照原文,且不可以出现对文本的引用和对照的描述:例如"根据文本中的描述"或者"根据图片的描述"或者"根据图片的分析"等等。\
推理过程要包括对图片的描述和分析,然后再进行推理得出答案。推理中所有知识和依据需要独立于原文,使读者在阅读时不需要去对照原文,且不可以出现对文本的引用和对照的描述:例如"根据文本中的描述"或者"根据图片的描述"或者"根据图片的分析"等等。\
请你将以上内容修改为一个完整的json格式字符串,来作为一条多模态模型训练数据。\
key分别为question, answer, choices, reasoning,lecture,context
question,answer, choices 为问题,答案和选项
lecture 为解答该问题所需要的知识点
context 为回答该问题所必需的背景信息,例如图片符号的定义,图片的来源,实验方法,实验环境等。
choices 为问题的选项,以一维数组的形式给出,每一个元素为一个字符串

以下是markdown文本内容:
{markdown}


""",


21: 
"""

我从论文中提取了一些图片，并根据论文为每个图片生成了一组VQA数据。用来训练多模态模型。\

以下是我根据论文为每个图片生成的VQA数据。\
问题相关知识:{lecture}
问题背景介绍:{context}
问题:{question}
选项:{choices}
答案:{answer}
推理过程:{reasoning}


我希望你可以根据文本内容对这些这些内容也需要进行修改和润色。
对于问题背景介绍的更改要求:
对于问题的背景介绍，我希望你在润色时能够根据文本内容进行修改，\
问题的背景介绍如果直接透露了问题的答案,你可以根据对它进行删除和简化，避免问题的答案直接出现在背景介绍中。\
但是对背景介绍的删除避免使得问题答案无法找到依据依据。
背景介绍只应该包含和图片图例解释相关的内容或者对于图片的背景介绍,例如图片上各个元素代表的意义和图片获取的环境,方法,拍摄的对象等。\
而不是问题的答案和推理过程。

对于推理过程的修改要求：
结合删改后的背景和原推理过程，重新整理推理过程。推理过程需要完整,清晰,准确。\
逻辑严密且能正确的推导出问题的答案。推理中所有知识和依据需要独立于原文,使读者在阅读时不需要去对照原文,\
且不可以出现对文本的引用和对照的描述:例如"根据文本中的描述"或者"根据图片中的描述"或者"根据图片的分析"等等。\
推理过程要包括对图片的描述和分析,然后再进行推理得出答案。且推理过程不可以过分简化。需要详细列出每一步的依据。可以适当扩展推理过程,但不能删除和改变问题相关知识的内容。\

对于问题相关知识的修改要求:
你可以对知识进行适当的扩写，但不能删除和改变问题相关知识的内容。知识需要完整,清晰,准确。\

对于问题和问题答案的修改要求：
你需要把问题和问题答案进行适当的修改和润色，你可以在保留原意的进行修改和润色或者改变问题的表述方式。\
但不可以删减问题的内容。改变问题的答案。根据给定的问题和选项，生成一条prompt指令,选项在的顺序不可以改变。\


请你将以上内容修改为一个完整的json格式字符串,来作为一条多模态模型训练数据。
key分别为input, output, instruction, reasoning
input 为问题背景介绍,
instruction 为任务指令,包括问题和选项,例如: "根据以下问题和选项,回答问题......"
output 为问题答案, 只返回一个数字，表示选项的序号,从0开始计数。
reasoning 为问题的推理过程

在input 的合适位置插入图片的路径,以<image>标记。\

""",
22:
"""
我生成了一些VQA数据,用来训练多模态模型。\
请你判断我的VQA数据是否符合要求并给出修改建议
判断依据：
1）给定输入的背景介绍和问题选项, 推理过程的逻辑是否能正确的推导出问题的答案。
2）推理过程是否完整,清晰,准确。推理逻辑能正确的推导出问题的答案。
3）推理过程是否存在幻觉, 即推理过程是否包含了不相关的内容,或者推理过程的依据是否无法从输入的背景介绍和问题选项中获得且不是已知知识。

VQA中的值是：
input为问题背景介绍,
instruction为任务指令, 将问题和选项合并为一条指令,例如: "根据以下问题和选项,回答问题......"
output为问题答案
reasoning为问题的推理过程

以json格式返回, key为:
"useful": 是否有用,有用为1, 没有用为0
"reason": 原因, 如果有用,则为"无",如果没有用,则为原因,原因为一个字符串
"suggestions": 修改建议, 如果有用,则为"无",如果没有用,则为修改建议,建议为一个字符串

以下是我生成的VQA数据:
{vqa_data}


""",
33: """
给定该图片和相关的上下文，我需要你从文中摘录所有和该图片相关的信息, 所有信息用于多模态模型的训练数据。

所有信息直接摘录原文，并分为以下四类:
1) 图片相关背景的介绍,例如相关知识,实验方法,实验环境等,专有名词的定义等。
2) 文中对图片现象相关的描述，例如图片折现的趋势，图片各个区域明暗，元素的分布等。
3) 和图像相关的科学知识和现象, 例如相关的科学定理,众所周知的科学现象等。
4) 利用图像内容对相关公式和科学定理的分析,推理与解释内容

如果信息缺失则不摘录，以无代替。


所有的信息请整理出JSON格式, key分别为:
"imageDescription", "imageBackground","imageExplanation","imageConclusion"
imageDescription为图片的描述和分析, imageBackground为图片相关背景的介绍, imageConclusion为和图像相关的公式和科学定理, imageExplanation为利用图像内容对相关公式和科学定理的分析,推理与解释内容。

每个key对应的值为一个字符串,内容为从文中摘录的相关内容。直接摘录原文，中间的无关内容用两个换行符隔开。每一段文字需要完整,清晰,准确。且独立于原文,使读者在阅读时不需要去对照原文。
注意，如果文中找不到相关内容,可以用"无"来代替。\

以下是图片和相关的上下文内容:图片在文中以 <image> 标记,无关图片以 <irrelevant> 标记

{markdown_content}

""",
43: """

以下是图片和相关的上下文内容:图片在文中以 \'< image >\' 标记,无关图片以 <irrelevant> 标记

我需要你从中摘录和图片相关的文字内容, 所有信息用于多模态模型的训练数据。
所有信息直接摘录原文，并以json格式返回, key为:
text



{markdown_content}

""",
34: """
<image>
关于该图片我们从论文中摘录了以下四个方面的内容
图片描述: {imageDescription} \n\n
相关背景: {imageBackground} \n\n
相关公理: {imageConclusion} \n\n
推理过程: {imageExplanation} \n\n

以上摘录信息是论文中和图片相关的内容。
这是图片<image>
我需要你根据以上信息设计一个一个多模态SFT数据, 用来提升模型，问题是是客观题(选择题或者填空题)
规则：
1. 推理过程可以通过仅观察给定图片，问题文字输入，或者科学常识得来
2. 问题需要为答案和推理过程提供足够的背景信息, 但不得直接摘录我提供的论文内容
3. 推理过程不得引用我摘录的论文内容, 也不得引用其他图片的内容
4. 问题的答案不可以和论文中的摘录信息冲突
5. 问题需要围绕相关公理和推理过程展开


以json格式返回, 且只返回一个json对象。
json的key为: question,img,answer,reasoning

"question": 文字输入，如果是选择题,则为问题和选项的合并,例如: "根据以下问题和选项,回答问题......"
"answer": 回答
"reasoning": 推理思维链

""",
341: """
<image>
关于该图片我们从论文中摘录了以下四个方面的内容
图片描述: {imageDescription} \n\n
相关背景: {imageBackground} \n\n
相关公理: {imageConclusion} \n\n
推理过程: {imageExplanation} \n\n

以上摘录信息是论文中和图片相关的内容。
这是图片<image>
我需要你根据以上信息设计一个提示词，提示词必须是和图片相关的问题，问题是是客观题(选择题或者填空题)
规则：
1. 需要为答案和推理过程提供足够的背景信息, 但不得直接摘录我提供的论文内容
2. 提示词需要围绕相关公理和推理过程展开
3. 图片描述和图片背景如果没有被标注到图片上, 则需要在提示词中给出图片的描述和背景信息, 以便用户理解问题
4. 题目需要有一定难度，不可以过分简单，面向人群是研究生人群

以json格式返回, 且只返回一个json对象。
json的key为: question,img,answer,reasoning

"question": 文字输入，如果是选择题,则为问题和选项的合并,例如: "根据以下问题和选项,回答问题......"

""",
343: """
<image>
以下是论文中和图片相关的内容 \n\n
{text} \n\n

我需要你根据以上信息设计一个提示词，提示词必须是和图片相关的问题，问题是是客观题(选择题或者填空题)且和半导体相关或者光学相关
规则：
1. 需要为答案和推理过程提供足够的背景信息, 但不得直接摘录我提供的论文内容
2. 提示词需要围绕相关公理和推理过程展开
3. 题目需要有一定难度，不可以过分简单，面向人群是研究生人群
4. 问题必须要利用图片上的信息才能获得正确答案，如果发现只利用提示词就可以回答需要重新设计
5. 设计完成后判断，是否不依赖图片信息也能解答，如果可以重新设计问题

以json格式返回, 且只返回一个json对象。
json的key为: question,img,answer,reasoning

"question": 文字输入，如果是选择题,则为问题和选项的合并,例如: "根据以下问题和选项,回答问题......"
如果无法设计出问题,则在question中返回"无法设计出问题",answer和reasoning的值也为"无法设计出问题"
""",
3431:"""
你是一位半导体与光学领域的资深研究生导师，擅长基于实验图谱与文献背景设计高阶思辨题目。  
以下由下游系统填入所需内容：  
图片：<image>  
文献摘录：{text}  

请严格执行以下步骤并输出**唯一**的 JSON 对象，不要多输出任何文字或注释：

1. 结合"图片"和"文献摘录"设计一题研究生水平的**客观题**（选择题或填空题），题目必须依赖图片中可见特征才能解答。  
2. 题目主题须与半导体物理或光学现象相关，且围绕相关公理/定律（如能带理论、光子吸收/发射机制、斯涅尔定律等）展开。  
3. 不得直接摘录"文献摘录"内容，可使用上位概念或等价表达，提供足够背景信息支撑答案与推理。  
4. 若"文献摘录"信息不足或与图片关联性不够，则JSON对象在question中返回"无法设计出问题",answer和reasoning的值也为"无法设计出问题。  
5. 输出语言为中文。
6. **自我校验**：生成后请检查，若仅凭题干文字即可回答，则重写题目，确保必须结合图片可见特征才能解答。

输出 JSON 的key：

'question': "<含选项的完整题干或填空提示，例如："根据图片中XXX曲线在YYY nm处的峰值及文献中ZZZ机理提示，以下哪项正确？A.… B.… C.… D.…">",
'img': "<简要指出题目依赖的图片特征，如"图中蓝色曲线在550 nm处出现第三阶谐波峰">",
'answer': "<正确选项字母或填空答案>",
'reasoning': "<研究生水平推理，引用所用公理/定律及可用的概念>"


""",
3432:"""
You are a senior graduate-level instructor in semiconductor and optical physics. The downstream system will supply:

Image: <image>  
Literature Excerpt: {text}  

Your task is to produce a single JSON object (no extra text) defining one objective question (multiple-choice or fill-in-the-blank) that meets all of these criteria:

1. Question, answer, and reasoning must be in fluent English.  
2. The question must target semiconductor- or optics-related phenomena and rely on at least one visual feature from the image to be answerable.  
3. Ground the question in relevant axioms or laws (e.g. band-gap theory, photon absorption/emission, Snell's law), but do not copy any full sentences from the excerpt—use higher-level or equivalent phrasing.  
4. Difficulty should suit a graduate audience—no overly simple facts.  
5. If literature excerpt and image is not enough for questiondesign, the value of key: 'question', 'answer' and 'reasoning' should be "无法设计出问题" for post-processing.  
6. After drafting, self-verify: if the question can be answered without the image, rewrite it to force image dependence.  
7. Constraints:  
   Output Language should be English.
Output JSON's key as follows:

"question": "<Full English question text, e.g. \"Based on the emission peak at 445 nm in panel (b), which statement is correct? A.… B.… C.… D.…\">",
"img": "<Brief English note of the image feature used, e.g. \"the 445 nm peak of the blue curve in panel (b)\">",
"answer": "<Correct option letter or fill-in value>",
"reasoning": "<English reasoning sentences that lead to the correct answer and cite law/principle or concept that supply the reasoning and answer>"


""",
342: """
<image>
关于该图片我们从论文中摘录了以下四个方面的内容
图片描述: {imageDescription} \n\n
相关背景: {imageBackground} \n\n
相关公理: {imageConclusion} \n\n
推理过程: {imageExplanation} \n\n

以上摘录信息是论文中和图片相关的内容。
这是图片<image>
我需要你根据以上信息设计一个提示词，提示词必须是和图片相关的问题，问题是是客观题(选择题或者填空题)
规则：
1. 需要为答案和推理过程提供足够的背景信息, 但不得直接摘录我提供的论文内容
2. 提示词需要围绕相关公理和推理过程展开

接着根据提示词给出提示词的答案和推理过程
1. 推理过程可以通过仅观察给定图片，问题文字输入，或者科学常识得来
2. 推理过程不得引用我摘录的论文内容, 也不得引用其他图片的内容
3. 提示词问题的答案不可以和论文中的摘录信息冲突


以json格式返回, 且只返回一个json对象。
json的key为: question,answer,reasoning

"question": 文字输入，如果是选择题,则为问题和选项的合并,例如: "根据以下问题和选项,回答问题......"
"answer": 回答
"reasoning": 推理思维链

""",
35: """
<image>
关于该图片我们从论文中摘录了以下四个方面的内容
图片描述: {imageDescription} \n\n
相关背景: {imageBackground} \n\n
相关公理: {imageConclusion} \n\n
推理过程: {imageExplanation} \n\n

以上摘录信息是论文中和图片相关的内容。
这是图片<image>
我需要你根据这些信息设计一个多模态SFT数据, 用来提升模型，问题是是客观题(选择题或者填空题)
规则：
1. 推理过程可以通过仅观察给定图片，问题文字输入，或者科学常识得来
2. 问题需要为答案和推理过程提供足够的背景信息, 但不得直接摘录我提供的论文内容
3. 推理过程不得引用我摘录的论文内容, 也不得引用其他图片的内容
4. 问题的答案不可以和论文中的摘录信息冲突
5. 问题需要围绕相关公理和推理过程展开


以json格式返回, 且只返回一个json对象。
json的key为: question,img,answer,reasoning

"question": 文字输入，如果是选择题,则为问题和选项的合并,例如: "根据以下问题和选项,回答问题......"
"answer": 回答
"reasoning": 推理思维链

""",

36: """
问题：{question}, <image>
以上是问题的#文字部分#和#图片#

以下是推理过程
推理过程：{reasoning}

请你判断推理过程是否可以从题目的#文字部分#和#图片#中推导而来，
如果推理过程中的所有论据都能在#文字部分#和#图片#或者科学公理中找到证据，则返回 1
如果推理过程中的任一所有论据无法在#文字部分#和#图片#或者科学公理中找到依据，则返回-1。

注意哪怕答案是正确的，但只要推理过程中的所有论据有无法在#文字部分#和#图片#中找到依据或者是假设性的知识,就返回-1
""",
37:"""
问题：{question}

以上是一个问题 和图片 <image>
判断问题和图片是否不合理缺少必要的细节和信息以回答问题
如果题目提供了足够的信息则返回 1
否则返回 -1

""",
38:
    """
    问题：{question}
   
    以上是一个问题和图片
    判断图片是否过于模糊或者缺少必要的细节和信息
    如果无法提供帮助则返回 -1
    如果图片可以提供帮助则返回 1
    

    """,
39: """
    问题：{question}
    推理过程: {reasoning}
    答案: {answer}
    
    以上是一个问题,问题图片,答案和推理过程
    判断答案和推理过程是否正确
    如果答案和推理过程都正确则返回 1
    如果答案和推理过程存在任一一个错误则返回 -1
    """,
40: """
    问题：{question}
    推理过程: {reasoning}
    答案: {answer}
    
    以上是一个问题,问题图片,答案和推理过程
    判断该问题是否过于简单不需要结合图片信息进行推理
    如果问题过于简单不需要复杂推理过程则返回 -1
    如果问题需要推理过程则返回 1
    """,
2123: """
    PPT内容: <ppt>
    相关图片：<image>
    
    根据以上ppt 和相关图片请设计一个提示词，提示词必须是和图片相关的问题，问题是是客观题(选择题或者填空题)
    规则：
    1. 需要为答案和推理过程提供足够的背景信息
    2. 提示词需要围绕PPT内容展开

    接着给出提示词的答案


    以json格式返回, 且只返回一个json对象。
    json的key为: question,img,answer,reasoning

    "question": 文字输入，如果是选择题,则为问题和选项的合并,例如: "根据以下问题和选项,回答问题......"
    "answer": 回答
    
    如果图片无法提供帮助则返回 -1
    
    """
}

# 文本专用的prompt模板
text_prompts = {
    "text_qa_basic": """
根据以下文本内容，生成高质量的问答对。要求：
1. 问题应该基于文本内容，具有一定的思考深度
2. 答案应该准确、完整，基于文本内容
3. 生成多种类型的问题：事实性、推理性、比较性等

文本内容：
{text_content}

请以JSON格式返回，包含以下字段：
- qa_pairs: 问答对列表
- key_concepts: 关键概念列表
- technical_details: 技术细节（包含materials, parameters, methods）
- main_findings: 主要发现
""",
    
    "text_qa_advanced": """
基于以下文本内容，生成专业级别的问答对，适合研究生水平：
1. 问题应该涉及深层理解和分析
2. 包含推理过程和科学原理
3. 答案要有详细的解释和依据

文本内容：
{text_content}

请以JSON格式返回问答对，每个问答对包含：
- question: 问题
- answer: 答案  
- question_type: 问题类型（factual/reasoning/comparison/open_ended）
- difficulty: 难度级别（basic/intermediate/advanced）
- reasoning: 推理过程
- related_concepts: 相关概念
""",

    "text_multimodal_prep": """
为以下文本内容准备多模态问答数据：
1. 提取可能与图像相关的描述性内容
2. 识别需要视觉信息支持的概念
3. 生成适合多模态场景的问题

文本内容：
{text_content}

请以JSON格式返回：
- visual_concepts: 视觉相关概念
- description_segments: 描述性片段
- potential_questions: 潜在的多模态问题
- context_info: 背景信息
"""
}

# 合并所有prompt
all_prompts = {**user_prompts, **text_prompts}

def get_prompt(prompt_id):
    """获取指定ID的prompt"""
    return all_prompts.get(prompt_id, "")

def get_system_prompt():
    """获取系统prompt"""
    return system_prompt

def list_available_prompts():
    """列出所有可用的prompt ID"""
    return list(all_prompts.keys())

def build_prompt(question, answer, prompt_template=None):
    """构建用于数据改写的prompt"""
    if prompt_template is None:
        prompt_template = """
基于以下问答对，生成一个新的改写版本，保持核心内容不变但表达方式更丰富：

原始问题: {question}
原始答案: {answer}

请生成：
1. 改写后的问题（保持原意但表达更自然）
2. 改写后的答案（内容一致但表述更清晰）
3. 相关的背景知识
4. 推理过程

以JSON格式返回，包含question, answer, background, reasoning字段。
"""
    
    return prompt_template.format(question=question, answer=answer)